"use strict";(function(){var a=angular.module("ngStorage",[]).factory("$localStorage",b("localStorage")).factory("$sessionStorage",b("sessionStorage"));function b(c){return["$rootScope","$window",function(d,m){var l=m[c]||(console.warn("This browser does not support Web Storage!"),{}),h={$default:function(n){for(var i in n){angular.isDefined(h[i])||(h[i]=n[i])}return h},$reset:function(n){for(var i in h){"$"===i[0]||delete h[i]}return h.$default(n)}},j,f;for(var g=0,e;g<l.length;g++){(e=l.key(g))&&"ngStorage-"===e.slice(0,10)&&(h[e.slice(10)]=angular.fromJson(l.getItem(e)))}j=angular.copy(h);d.$watch(function(){f||(f=setTimeout(function(){f=null;if(!angular.equals(h,j)){angular.forEach(h,function(o,n){angular.isDefined(o)&&"$"!==n[0]&&l.setItem("ngStorage-"+n,angular.toJson(o));delete j[n]});for(var i in j){l.removeItem("ngStorage-"+i)}j=angular.copy(h)}},100))});"localStorage"===c&&m.addEventListener&&m.addEventListener("storage",function(i){if("ngStorage-"===i.key.slice(0,10)){i.newValue?h[i.key.slice(10)]=angular.fromJson(i.newValue):delete h[i.key.slice(10)];j=angular.copy(h);d.$apply()}});return h}]}module.exports=a})();
var mobileNavMod=angular.module("ajoslin.mobile-navigate",[require("../node_modules/angular-bsfy/animate").name,require("../node_modules/angular-bsfy/route").name]);mobileNavMod.provider("$change",function(){var f={ionicslide:["ionicslide","ionicslide-prev"],modal:["modal",""],none:["",""]};var c={prefix:"mb-"};var e="in";var g="out";var b="reverse";var d="done";var a="webkitAnimationName" in document.documentElement.style?"webkitAnimationEnd":"animationend";this.setTransitionPreset=function(j,i,h){i=i||"";h=h||i;f[j]=[i,h]};this.options=function(h){c=angular.extend(c,h||{})};this.$get=["$q","$rootScope",function(i,h){return function j(q,n,k,r,x){x=angular.extend(x||{},c);var w=i.defer(),o,l;function t(y){return y.reduce(function(A,z){return A+(z?(" "+x.prefix+z):"")},"")}var s=f[k]?f[k]:[k,""];q.css("z-index","-100");q[0].offsetWidth+=0;var u=t([r?g:e,(o=s[r?1:0]),r&&b||""]);q.addClass(u);var v;if(n){v=t([r?e:g,(l=s[r?0:1]),r&&b||""]);n.addClass(v)}q.css("z-index","");q[0].offsetWidth+=0;function p(){h.$apply(function(){w.resolve()})}var m;if(o&&o.length){(m=q).bind(a,p)}else{if(n&&l&&l.length){(m=n).bind(a,p)}else{w.resolve()}}w.promise.then(function(){m&&m.unbind(a,p);q.removeClass(u);n&&n.removeClass(v)});w.promise.cancel=function(){w.resolve()};return w.promise}}]}).provider("$navigate",function(){this.$get=["$rootScope","$location","$route",function(g,e,f){var a={},b=[];function i(o,p,n){var l=o,j=p||"slide",m=n,k;this.transition=function(){var q;if(k){q=k;k=null}else{q=j}return q};this.path=function(){return l};this.reverse=function(){return m};this.transitionOnce=function(q){k=q}}function c(j,m,l,k){g.$broadcast("$pageTransitionStart",j,m,l,k);a.current=a.next}a.onRouteSuccess=null;function h(j,k,l){a.current&&b.push([a.current,k]);a.next=new i(e.path());a.next.transitionOnce("none");c(a.next);a.onRouteSuccess=null}g.$on("$routeChangeSuccess",function(j,k,l){if(!k.$$route||!k.$$route.redirectTo){(a.onRouteSuccess||h)(j,k,l)}g.$broadcast("$pageNaved",b,k,l)});a.go=function d(k,l,j){if(typeof l=="boolean"){j=l;l=null}e.path(k);a.onRouteSuccess=function(m,n,o){a.current&&b.push([a.current,n]);a.next=new i(k,l||(n.$$route&&n.$$route.transition),j);c(a.next,a.current,false)}};a.eraseHistory=function(k,j){b=[];if(j){b.push([k,j])}return b};a.getHistory=function(){return b};a.back=function(){try{if(b.length>0){var j=b[b.length-1][0];e.path(j.path());a.onRouteSuccess=function(){b.pop();a.next=j;c(a.next,a.current,true,true)};return true}return false}catch(k){return false}};return a}]});mobileNavMod.directive("mobileView",["$rootScope","$compile","$controller","$route","$change","$q",function(b,e,a,g,d,c){function f(l,j,i){function k(m){var o=g.current,n=o&&o.locals;m.element=angular.element(document.createElement("div"));m.element.html(n.$template);m.element.addClass("mb-page");m.scope=l.$new();if(o.controller){n.$scope=m.scope;m.controller=a(o.controller,n);m.element.contents().data("$ngControllerController",m.controller)}e(m.element.contents())(m.scope);if(n&&n.$template){j.append(m.element)}m.scope.$emit("$viewContentLoaded");m.scope.$eval(i.onLoad);return m}var h;l.$on("$pageTransitionStart",function(q,p,r,o,n){function m(){var v=g.current&&g.current.$$route||{};if(n){o=true}var w=o?r.transition():p.transition();k(p);if(p.reverse()||v.reverse){if(!n){o=!o}}function t(){var x=d(p.element,(r?r.element:null),w,o);x.then(function(){if(r){b.$broadcast("$pageTransitionSuccess",p,r);r.scope.$destroy();r.element.remove();r=undefined}});return x}p.element.css("display","none");var s=l.$eval(i.deferTransition)||c.when();s.cancel=function(){u=true;p.element.css("display","")};var u=false;s.then(function(){if(!u){p.element.css("display","");return t()}});return s}h&&h.cancel();h=m(p,r,o)})}return{restrict:"EA",link:f}}]).directive("scrollable",["$route",function(b){var a={};return{restrict:"EA",link:function(f,h,d){var c=b.current?b.current.$$route:{};var e=c.templateUrl||c.template;var g=h[0];if(e){setTimeout(function(){var i=a[e];if(i){g.scrollTop=i}});f.$on("$destroy",function(){a[e]=g.scrollTop})}}}}]);module.exports=mobileNavMod;
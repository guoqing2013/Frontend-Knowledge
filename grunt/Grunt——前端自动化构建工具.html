
<!DOCTYPE html>
<html>
<head>
<title>Grunt——前端自动化构建工具</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
}

/* BODY
=============================================================================*/

body {
    font-family: Helvetica, arial, freesans, clean, sans-serif;
    font-size: 14px;
    line-height: 1.6;
    color: #333;
    background-color: #fff;
    padding: 20px;
    max-width: 960px;
    margin: 0 auto;
}

body>*:first-child {
    margin-top: 0 !important;
}

body>*:last-child {
    margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
    margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
    margin: 20px 0 10px;
    padding: 0;
    font-weight: bold;
    -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
    font-size: inherit;
}

h1 {
    font-size: 28px;
    color: #000;
}

h2 {
    font-size: 24px;
    border-bottom: 1px solid #ccc;
    color: #000;
}

h3 {
    font-size: 18px;
}

h4 {
    font-size: 16px;
}

h5 {
    font-size: 14px;
}

h6 {
    color: #777;
    font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
    margin-top: 0;
    padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
    margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
    color: #4183C4;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
    padding-left: 30px;
}

ul li > :first-child,
ol li > :first-child,
ul li ul:first-of-type,
ol li ol:first-of-type,
ul li ol:first-of-type,
ol li ul:first-of-type {
    margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
    margin-bottom: 0;
}

dl {
    padding: 0;
}

dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px;
}

dl dt:first-child {
    padding: 0;
}

dl dt>:first-child {
    margin-top: 0px;
}

dl dt>:last-child {
    margin-bottom: 0px;
}

dl dd {
    margin: 0 0 15px;
    padding: 0 15px;
}

dl dd>:first-child {
    margin-top: 0px;
}

dl dd>:last-child {
    margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
    font-size: 12px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
    margin: 0 0px;
    padding: 0px 0px;
    white-space: nowrap;
    border: 1px solid #eaeaea;
    background-color: #f8f8f8;
    border-radius: 3px;
}

pre>code {
    margin: 0;
    padding: 0;
    white-space: pre;
    border: none;
    background: transparent;
}

pre {
    background-color: #f8f8f8;
    border: 1px solid #ccc;
    font-size: 13px;
    line-height: 19px;
    overflow: auto;
    padding: 6px 10px;
    border-radius: 3px;
}

pre code, pre tt {
    background-color: transparent;
    border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
    border-left: 4px solid #DDD;
    padding: 0 15px;
    color: #777;
}

blockquote>:first-child {
    margin-top: 0px;
}

blockquote>:last-child {
    margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
    clear: both;
    margin: 15px 0;
    height: 0px;
    overflow: hidden;
    border: none;
    background: transparent;
    border-bottom: 4px solid #ddd;
    padding: 0;
}

/* TABLES
=============================================================================*/

table th {
    font-weight: bold;
}

table th, table td {
    border: 1px solid #ccc;
    padding: 6px 13px;
}

table tr {
    border-top: 1px solid #ccc;
    background-color: #fff;
}

table tr:nth-child(2n) {
    background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
    max-width: 100%
}
</style>
<base href='file:\\\F:\Frontend-Knowledge\grunt\'/>
</head>
<body>
<!--
http://tgideas.qq.com/webplat/info/news_version3/804/808/811/m579/201307/216460.shtml

http://wenku.baidu.com/link?url=foCse_EOL-v_WHP8LYircMvpZaMy9pCQnv49lr3zPRF-ZJJGYY3bzARBHMH220gpMpomh-e2dU89-fbtr-8F07nAEqoYqQfvsJIjKfdxObq

http://javascript.ruanyifeng.com/tool/grunt.html
-->
<h1>Grunt 前端自动化构建工具</h1>
<p>中文介绍网址：<a href="http://www.gruntjs.net/">http://www.gruntjs.net/</a><br />
    英文介绍网址：<a href="http://gruntjs.com/">http://gruntjs.com/</a></p>
<p>Grunt是一个自动任务运行器，会按照预先设定的顺序自动运行一系列的任务。如：合并文件、压缩代码、检查语法错误、将Sass代码转成CSS代码等等。这可以简化工作流程，减轻重复性工作带来的负担。</p>
<h2>安装 grunt-cli</h2>
<p>安装 grunt-cli，将Grunt命令行（CLI）安装到全局环境中<br />
    <code>npm install grunt-cli -g</code></p>
<h2>配置 grunt</h2>
<p>项目中添加两份文件：package.json 和 Gruntfile。<br />
    1. <strong>paskage.json</strong> 此文件被npm用于存储项目的元数据，以便将此项目发布为npm模块。你可以在此文件中列出项目以来的grunt和grunt插件，置于devDependencies配置段内。<br />
    2. <strong>Gruntfile</strong>: Gruntfile.js是Grunt的配置文件，用来配置或定义任务（task）并加载Grunt插件的。<br />
    <em>Grunt项目的结构</em>：
    <img src="http://guoqing2013.3vzhuji.com/markdown/grunt/pic1.png" alt="Grunt项目的结构" /></p>
<h3>创建package.json文件的方式</h3>
<ul>
    <li>大部分 <a href="http://gruntjs.com/project-scaffolding">grunt-init</a>  模版都会自动创建特定于项目的package.json文件。</li>
    <li><a href="https://www.npmjs.org/doc/cli/npm-init.html">npm init</a>命令会创建一个基本的package.json文件。</li>
    <li>复制下面的案例，并根据需要做扩充，参考此说明.</li>
</ul>
<pre>
{
    "name": "mypackage", //项目名称
    "version": "0.7.0", //版本
    "description": "Sample package for CommonJS. This package demonstrates the required elements of a CommonJS package.", //项目描述
    "keywords": ["package", "example"],  //有利于使用npm search时找到该项目
    "maintainers": [{   //项目维护人
        "name": "Bill Smith",
        "email": "bills@example.com",
        "web": "http://www.example.com"
    }],
 // "author": "Mary Brown", //项目作者 （一个人）
    "contributors": [{ //项目贡献人（多个人）
        "name": "Mary Brown",
        "email": "maryb@embedthis.com",
        "web": "http://www.embedthis.com"
    }],
    "dependencies": {  //项目运行所依赖的模块
        "express": "latest",
        "mongoose": "~3.8.3",
        "handlebars-runtime": "~1.0.12",
        "express3-handlebars": "~0.5.0",
        "MD5": "~1.2.0"
    },
    "devDependencies": { //项目开发所需要的模块
        "bower": "~1.2.8",
        "grunt": "~0.4.1",
        "grunt-contrib-concat": "~0.3.0",
        "grunt-contrib-jshint": "~0.7.2",
        "grunt-contrib-uglify": "~0.2.7",
        "grunt-contrib-clean": "~0.5.0",
        "browserify": "2.36.1",
        "grunt-browserify": "~1.3.0",
    },
    "os": ["linux", "macos", "win"], //表示在哪些操作系统下可以运行
    "cpu": ["x86", "ppc", "x86_64"], //表在哪些cpu架构下可以运行
    // "engines": ["v8", "ejs", "node", "rhino"],
    "engines": { //该项目所需要的node.js版本。
        "node": ">= 0.8.0"
    },
    "scripts": { //指定运行脚本命令的npm命令行缩写，比如start指定了运行npm run start时，所要执行的命令。
        "preinstall": "echo here it comes!",
        "postinstall": "echo there it goes!",
        "start": "node index.js"
    },
    "directories": {
        "lib": "src/lib",
        "bin": "local/binaries",
        "jars": "java"
    }
}
</pre>
<p>有了package.json文件，直接使用 <code>npm install</code> 命令，就会在当前目录中安装所需要的模块。</p>
<p>对应的版本可以加上各种限定，主要有以下几种：
</p>
<blockquote>
    <p>指定版本：比如1.2.2，遵循“大版本.次要版本.小版本”的格式规定，安装时只安装指定版本。<br />
        波浪号：比如~1.2.2，表示安装1.2.x的最新版本（不低于1.2.2），但是不安装1.3.x，也就是说安装时不改变大版本号和次要版本号。<br />
        插入号：比如?1.2.2，表示安装1.x.x的最新版本（不低于1.2.2），但是不安装2.x.x，也就是说安装时不改变大版本号。需要注意的是，如果大版本号为0，则插入号的行为与波浪号相同，这是因为此时处于开发阶段，即使是次要版本号变动，也可能带来程序的不兼容。<br />
        latest：安装最新版本。</p>
</blockquote>
<h2>Gruntfile.js</h2>
<p>Gruntfile主要有三个方法：</p>
<ul>
    <li>
        <p>grunt.initConfig：定义各种模块的参数，每一个成员项对应一个同名模块。</p>
    </li>
    <li>
        <p>grunt.loadNpmTasks：加载完成任务所需的模块。</p>
    </li>
    <li>
        <p>grunt.registerTask：定义具体的任务。第一个参数为任务名，第二个参数是一个数组，表示该任务需要依次使用的模块。default任务名表示，如果直接输入grunt命令，后面不跟任何参数，这时所调用的模块（该例为uglify）。</p>
    </li>
</ul>
<pre>
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    uglify: {
      options: {
        banner: '/*! <%= pkg.name %> <%= grunt.template.today("yyyy-mm-dd") %> */\n'
      },
      build: {
        src: 'src/<%= pkg.name %>.js',
        dest: 'build/<%= pkg.name %>.min.js'
      }
    }
  });

  // Load the plugin that provides the "uglify" task.
  grunt.loadNpmTasks('grunt-contrib-uglify');

  // Default task(s).
  grunt.registerTask('default', ['uglify']);

};
</pre>
<p>待续</p>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
